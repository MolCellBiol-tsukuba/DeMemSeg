# DeMemSeg: A Tool for Yeast Cell Prospore Membrane Segmentation and Analysis
![DeMemSeg Logo](src/GraphicalAbst.png)

## Overview
This repository provides tools and scripts for:
- Cropping individual yeast cells from microscope images (fluorescently labeled membrane images).
- Segmenting the prospore membrane within the cropped images.

## Prerequisites
This project requires GPU acceleration for segmentation tasks. Ensure that CUDA is installed on your system. Refer to the [CUDA Installation Guide](https://docs.nvidia.com/cuda/wsl-user-guide/index.html) for instructions.

### CUDA Version Requirements
- **Cellpose**: Compatible with CUDA 11.8 or earlier.
- **MMDetection**: Requires CUDA 11.8 or later (uses PyTorch).

The author recommends using `pyenv` with `conda` or `mamba` for environment management. Refer to this [guide](https://qiita.com/toshi_machine/items/7e4942dc34ef4bdbe4b1) for setup instructions.

### Additional Requirements
- Yeast strain: SK1 diploid
- Microscope: Leica THUNDER
  - Magnification: x100
  - Image resolution: 2048x2048
  - Bit depth: 8-bit

## Installation
To set up the environment, follow these steps:

```bash
# Clone the repository
git clone https://github.com/your-repo/DeMemSeg.git
cd DeMemSeg

# Create and activate a conda environment
conda create -n dememseg_env python=3.8
conda activate dememseg_env

# Install dependencies
pip install -r requirements.txt
```

## Repository Structure
- **data/**: Contains input and output CSV files for curvature and elongation analysis.
- **figure/**: Stores generated figures and visualizations.
- **model/**: Includes pre-trained models for segmentation tasks.
- **notebook/**: Jupyter notebooks for exploratory data analysis.
- **script/**: R scripts for data processing and visualization.

## Scripts Description
- **`script/r_dataset_curvature_SeptinMutant.R`**  
  This script consolidates CSV files generated using the Fiji plugin *Keppa*. It quantifies the point of curvature and fluorescence intensity along the line, creating a combined CSV file for wild-type (WT) and mutant strains.

- **`script/r_visualize_curvature_SeptinMutant.R`**  
  This script uses the CSV file (`data/all_curvature_normalized.csv`) generated by `r_dataset_curvature_SeptinMutant.R` to produce various visualizations. The purpose of each visualization is documented within the script.

## Usage
1. **Preprocess Images**: Use the provided tools to crop individual yeast cells from microscope images.
2. **Run Segmentation**: Apply the segmentation model to identify the prospore membrane.
3. **Analyze Results**: Use the R scripts to analyze curvature and elongation data.
4. **Visualize Data**: Generate visualizations for publication or further analysis.

## Citation
If you use this repository in your research, please cite the corresponding article:

> Author(s), "Title of the Article," *Cell Structure and Functions*, Year, DOI.

## License
This project is licensed under the MIT License. See the LICENSE file for details.

## Contact
For questions or issues, please contact [your-email@example.com](mailto:your-email@example.com).